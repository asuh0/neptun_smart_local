# Neptun Smart Local Integration

Не официальная интеграция для локального подключения системы защиты от протечек Neptun Smart по протоколу Modbus поверх tcp.

Для настройки модуль должен быть подключен к сети любым способом и должен быть известен его IP - адрес

В интеграции доступно состояние модуля, линий, настройка линий, беспроводных датчиков, показания счетчиков (добавляются в раздел Энергия). Управление счетчиками не реализовано, они должны быть настроены через приложение, до настройки интеграции, добавляются только включенные счетчики. Счетчики добавляются с адресом регистра, в котором лежат показания, чтобы обеспечить их уникальность при подключении новых.

![image](https://github.com/user-attachments/assets/fcecd850-dd88-435d-be48-c2b04309730c)![image](https://github.com/user-attachments/assets/f4ee55cc-f55d-4f3c-ba52-9db3b4d8dd83)![image](https://github.com/user-attachments/assets/85ea9ada-009a-43d0-badd-89511862a8c6)




# Установка
## Вариант 1 через HACS
1) Добавить репозиторий https://github.com/sergeylysov/neptun_smart_local/в HACS. Перейти в HACS -> Интеграции -> Спарва сверху 3 точки -> Пользовательские репозитории, вставить ссылку и выбрать категорию "Интеграция" -> Добавить.
2) Перезагрузить HA.
3) Настроить интеграцию - Конфигурация -> Устройства и службы -> Добавить интеграцию, в поиске ввести Neptun, выбрать интеграцию "Neptun Smart Local"
![image](https://github.com/user-attachments/assets/1cb74aa9-258f-4fcd-b3d3-7276af6f207c)

(Если такая интеграция не находится, Ctrl + F5, чтобы обновить кэш браузера)
Ввести адрес модуля и название, название произвольно, порт оставить по умолчанию
![image](https://github.com/user-attachments/assets/386527a1-5006-45cf-9263-4e25905d93c6)


## Вариант 2 - Вручную
1) Cкопировать каталог neptun_smart_local из репозитория в папку custom_components на сервере Home Assistant
2)Перезагрузить HA.
3) Настроить интеграцию - Конфигурация -> Устройства и службы -> Добавить интеграцию, в поиске ввести Neptun, выбрать интеграцию "Neptun Smart Local"

Пока есть непобежденная проблема, после инициализациия выдается ошибка, что не удалось настроить интеграцию, после инициализации нужно перезагрузить HA и будет все нормально.
